
  CAdir is a script for managing an x509 Certificate Authority, offering
  request signing and queries of the CA.

  CAdir receives the request or query parameters on standard in, locks the CA
  with a POSIX lock and performs the requested action. One use case for CAdir
  is as an SSH forced command, allowing nodes in a cluster of computers to
  concurrently make authenticated requests of the CA.


                                                              Command Language
   ----------------------------------------------------------------------------

    <request>     = sign :<request bytes>     # Sign the request.
                  | cert                      # Get the CA cert.


                                Creating A Certificate Authority & Using CAdir
   ----------------------------------------------------------------------------

    To create a certificate authority with OpenSSL is easy, if hard to uncover:

      openssl req -new -newkey rsa:2048 -x509 -days 1095 \
                  -keyout ca.key -out ca.crt \
                  -subj '/CN=example.com/O=ECom/C=US/ST=Oregon/L=Portland'

    It will ask you to enter a password for your key; this is a good
    practice. When you deploy CAdir, unencrypt your key:

      openssl rsa < ./ca.key > ./ca.plain.key

    CAdir will prefer a file called `ca.plain.key' if it exists. Otherwise, it
    uses `ca.key'. Now create a new private key and certificate signing
    request:

      openssl req -new -newkey rsa:2048 -nodes -keyout mail.key -out mail.csr \
                  -subj '/CN=mail.example.com/O=ECom/C=US/ST=Oregon/L=Portland'

    Here, you are creating a key for your mail server. The `nodes' option
    causes OpenSSL to skip asking you to encrypt the key (probably okay for
    your mail server).

    Let's sign the certificate signing request to get a signed cert:

      (echo -n 'sign :' ; cat ./mail.csr) | CAdir ./ | sed 1d > ./mail.crt

    (We strip off the first line with Sed because that is CAdir's status
    message.) Look upon your cert, marvel at its beauty:

      openssl x509 -text < ./mail.crt

    CAdir has a bunch of things to say, which it will put on STDOUT. Much of
    this info is placed in ./CAdir/log, as well. CAdir has an option to log to
    syslog, too.

